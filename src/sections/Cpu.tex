\begin{center}
    \includegraphics[width=.7\linewidth]{cpu_flowchart.png}
\end{center}

\begin{multicols*}{3}
    \section{CPU Design}
    \subsection{Opcode}

    \begin{footnotesize}
        \renewcommand{\arraystretch}{1.2}
        \setlength{\oldtabcolsep}{\tabcolsep}\setlength\tabcolsep{6pt}
        \begin{tabularx}{\linewidth}{@{}T T Z Z Z Z @{}}                                                                                             \\
                                                                  & Signal name & R-format                               & lw & sw & beq \\
            \cmidrule{2-6}
            \multirow{7}{*}{\begin{sideways}Input\end{sideways}}  & I[6]        & 0                                      & 0  & 0  & 1   \\
                                                                  & I[5]        & 1                                      & 0  & 1  & 1   \\
                                                                  & I[4]        & 1                                      & 0  & 0  & 0   \\
                                                                  & I[3]        & 0                                      & 0  & 0  & 0   \\
                                                                  & I[2]        & 0                                      & 0  & 0  & 0   \\
                                                                  & I[1]        & 1                                      & 1  & 1  & 1   \\
                                                                  & I[0]        & 1                                      & 1  & 1  & 1   \\
            \cmidrule{2-6}
            \morecmidrules\cmidrule{2-6}
            \multirow{6}{*}{\begin{sideways}Output\end{sideways}} & ALUSrc      & 0                                      & 1  & 1  & 0   \\
                                                                  & MemtoReg    & 0                                      & 1  & X  & X   \\
                                                                  & RegWrite    & 1                                      & 1  & 0  & 0   \\
                                                                  & MemRead     & 0                                      & 1  & 0  & 0   \\
                                                                  & MemWrite    & 0                                      & 0  & 1  & 0   \\
                                                                  & Branch      & 0                                      & 0  & 0  & 1   \\
                                                                  & ALUOp       & \multicolumn{4}{c}{\tt See next table}
        \end{tabularx}
        \renewcommand{\arraystretch}{1}
        \setlength{\tabcolsep}{\oldtabcolsep}
    \end{footnotesize}
    \code{X}: Don't care

    \subsection{ALUOp}

    \begin{footnotesize}
        \renewcommand{\arraystretch}{1.2}
        \setlength{\oldtabcolsep}{\tabcolsep}\setlength\tabcolsep{6pt}
        \begin{tabularx}{\linewidth}{@{}T Z Z Z T Z@{}}                                                                                                                \\
            Opcode                  & ALUOp               & Funct7  & Funct3 & ALU action                                              & ALU contr         \\
            \cmidrule{2-6}
            lw                      & 00                  & XXXXXXX & XXX    & add                                                     & 0010              \\
            sw                      & 00                  & XXXXXXX & XXX    & add                                                     & 0010              \\
            beq                     & 01                  & XXXXXXX & XXX    & sub                                                     & 0110              \\
            \multirow{4}{*}{R-type} & \multirow{4}{*}{10} & 0000000 & 000    & \color{teal} add                                        & \color{teal} 0010 \\
                                    &                     & 0100000 & 000    & \color{teal} sub                                        & \color{teal} 0110 \\
                                    &                     & 0000000 & 111    & \color{teal} and                                        & \color{teal} 0000 \\
                                    &                     & 0000000 & 110    & \color{teal} or                                         & \color{teal} 0001 \\
                                    &                     &         &        & \multicolumn{2}{c}{\color{teal} \tt{ALU control lines}}                     \\
        \end{tabularx}
        \renewcommand{\arraystretch}{1}
        \setlength{\tabcolsep}{\oldtabcolsep}
    \end{footnotesize}
\end{multicols*}